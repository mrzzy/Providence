#
# Providence
# Transforms
# DBT Mart Models
#

version: 2
models:
  - name: mart_finance_dashboard
    description: One Big Table of Financial Transactions for populating the Finance Dashboard.
    columns:
      - name: year_month
        description: Year-month when the Transaction was made.
        tests:
          - not_null
      - name: year_month_week
        description: Year-month-week when the Transaction was made.
        tests:
          - not_null
      - name: transaction_amount
        description: Amount transacted in the Transaction.
        tests:
          - not_null
      - name: cash_amount
        description: Amount transacted in the Transactions on cash-like Accounts only.
        tests:
          - not_null
      - name: transaction_date
        description: Date when the Transaction was made.
        tests:
          - not_null
      - name: transaction_description
        description: User assigned description to the Transaction.
      - name: account_is_cash
        description: Whether the asset tracked by the Account has cash-like liquidity.
        tests:
          - not_null
      - name: spending
        description: Amount spent in the Transaction.
        tests:
          - not_null
          - dbt_utils.accepted_range:
              max_value: 0
      - name: is_unaccounted
        description: Whether the spending is considered to be unaccounted.
        tests:
          - not_null
      - name: income
        description: Amount gained in the Transaction.
        tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
      - name: is_passive
        description: Whether the income is considered to be passively generated.
        tests:
          - not_null
